From ca4f0de99f66418800360af50f1e554a19c9703b Mon Sep 17 00:00:00 2001
From: Fahad Arslan <Fahad_Arslan@mentor.com>
Date: Wed, 20 Apr 2016 22:50:18 +0500
Subject: [PATCH 1/1] store master cpu id

Signed-off-by: Fahad Arslan <Fahad_Arslan@mentor.com>
---
 drivers/rpmsg/rpmsg_imx6q_driver.c    | 3 +++
 drivers/rpmsg/rpmsg_imx6q_internals.h | 1 +
 2 files changed, 4 insertions(+)

diff --git a/drivers/rpmsg/rpmsg_imx6q_driver.c b/drivers/rpmsg/rpmsg_imx6q_driver.c
index a5e0c27..dde18aa 100644
--- a/drivers/rpmsg/rpmsg_imx6q_driver.c
+++ b/drivers/rpmsg/rpmsg_imx6q_driver.c
@@ -359,6 +359,9 @@ static int imx6q_rpmsg_initialize(struct platform_device *pdev)
 	virtio_dev->dev.parent  = &(imx6q_rpmsg_p->mid_dev);
 	virtio_dev->dev.release = imx6q_rpmsg_vdev_release;
 
+	imx6q_rpmsg_p->master_cpu_id = MASTER_CPU_ID;
+	virtio_dev->priv = &(imx6q_rpmsg_p->master_cpu_id);
+
 	/* Register the virtio device. */
 	ret = register_virtio_device(virtio_dev);
 
diff --git a/drivers/rpmsg/rpmsg_imx6q_internals.h b/drivers/rpmsg/rpmsg_imx6q_internals.h
index c7671fc..145d4b7 100644
--- a/drivers/rpmsg/rpmsg_imx6q_internals.h
+++ b/drivers/rpmsg/rpmsg_imx6q_internals.h
@@ -54,6 +54,7 @@ struct imx6q_rpmsg_instance {
 	u32	 virtioid;
 	u32	 ringtx;
 	u32	 ringrx;
+	u32	 master_cpu_id;
 
 	struct virtio_device virtio_dev;
 
-- 
2.8.1

